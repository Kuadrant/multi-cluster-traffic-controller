---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.10.0
  creationTimestamp: null
  name: dnsrecords.kuadrant.io
spec:
  group: kuadrant.io
  names:
    kind: DNSRecord
    listKind: DNSRecordList
    plural: dnsrecords
    singular: dnsrecord
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Managed Zone assigned to this record.
      jsonPath: .status.managedZone.name
      name: MZ Name
      type: string
    - description: Managed Zone namespace.
      jsonPath: .status.managedZone.namespace
      name: MZ Namespace
      type: string
    - description: DNSRecord ready.
      jsonPath: .status.conditions[?(@.type=="Ready")].status
      name: Ready
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        description: DNSRecord is the Schema for the dnsrecords API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: DNSRecordSpec defines the desired state of DNSRecord
            properties:
              endpoints:
                items:
                  description: Endpoint is a high-level way of a connection between
                    a service and an IP
                  properties:
                    dnsName:
                      description: The hostname of the DNS record
                      type: string
                    labels:
                      additionalProperties:
                        type: string
                      description: Labels stores labels defined for the Endpoint
                      type: object
                    providerSpecific:
                      description: ProviderSpecific stores provider specific config
                      items:
                        description: ProviderSpecificProperty holds the name and value
                          of a configuration which is specific to individual DNS providers
                        properties:
                          name:
                            type: string
                          value:
                            type: string
                        type: object
                      type: array
                    recordTTL:
                      description: TTL for the record
                      format: int64
                      type: integer
                    recordType:
                      description: RecordType type of record, e.g. CNAME, A, SRV,
                        TXT etc
                      type: string
                    setIdentifier:
                      description: Identifier to distinguish multiple records with
                        the same name and type (e.g. Route53 records with routing
                        policies other than 'simple')
                      type: string
                    targets:
                      description: The targets the DNS record points to
                      items:
                        type: string
                      type: array
                  type: object
                minItems: 1
                type: array
            type: object
          status:
            description: DNSRecordStatus defines the observed state of DNSRecord
            properties:
              conditions:
                description: "conditions are any conditions associated with the record
                  in the managed zone. \n If publishing the record fails, the \"Failed\"
                  condition will be set with a reason and message describing the cause
                  of the failure."
                items:
                  description: DNSZoneCondition is just the standard condition fields.
                  properties:
                    lastTransitionTime:
                      format: date-time
                      type: string
                    message:
                      type: string
                    reason:
                      type: string
                    status:
                      description: ConditionStatus represents a condition's status.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: DNSRecordConditionType represents DNSRecord condition
                        value.
                      type: string
                  required:
                  - status
                  - type
                  type: object
                type: array
              endpoints:
                description: "endpoints are the last endpoints that were successfully
                  published by the provider \n Provides a simple mechanism to store
                  the current provider records in order to delete any that are no
                  longer present in DNSRecordSpec.Endpoints \n Note: This will not
                  be required if/when we switch to using external-dns since when running
                  with a \"sync\" policy it will clean up unused records automatically."
                items:
                  description: Endpoint is a high-level way of a connection between
                    a service and an IP
                  properties:
                    dnsName:
                      description: The hostname of the DNS record
                      type: string
                    labels:
                      additionalProperties:
                        type: string
                      description: Labels stores labels defined for the Endpoint
                      type: object
                    providerSpecific:
                      description: ProviderSpecific stores provider specific config
                      items:
                        description: ProviderSpecificProperty holds the name and value
                          of a configuration which is specific to individual DNS providers
                        properties:
                          name:
                            type: string
                          value:
                            type: string
                        type: object
                      type: array
                    recordTTL:
                      description: TTL for the record
                      format: int64
                      type: integer
                    recordType:
                      description: RecordType type of record, e.g. CNAME, A, SRV,
                        TXT etc
                      type: string
                    setIdentifier:
                      description: Identifier to distinguish multiple records with
                        the same name and type (e.g. Route53 records with routing
                        policies other than 'simple')
                      type: string
                    targets:
                      description: The targets the DNS record points to
                      items:
                        type: string
                      type: array
                  type: object
                type: array
              managedZone:
                description: Reference to the managed zone that this record is being
                  published to.
                properties:
                  name:
                    description: '`name` is the name of the service. Required'
                    type: string
                  namespace:
                    description: '`namespace` is the namespace of the managed zone
                      Required'
                    type: string
                required:
                - name
                - namespace
                type: object
              observedGeneration:
                description: observedGeneration is the most recently observed generation
                  of the DNSRecord.  When the DNSRecord is updated, the controller
                  updates the corresponding record in each managed zone.  If an update
                  for a particular zone fails, that failure is recorded in the status
                  condition for the zone so that the controller can determine that
                  it needs to retry the update for that specific zone.
                format: int64
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
